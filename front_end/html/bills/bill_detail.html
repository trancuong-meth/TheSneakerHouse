<div class="card p-3 shadow">

  <!-- bread crumbs -->
  <div class="d-sm-flex d-block align-items-center justify-content-between ">
    <div class=" mb-sm-0">
      <i class="ti ti-home-2"></i> / <a href="#!hoa-don">Quản lý đơn hàng</a> /
      <span style="color: black;display: inline-block;">Chi tiết đơn hàng</span>
    </div>
  </div>

  <div class="sch-style-2" ng-if="bill.trangThai == 5">
    <div class="sch-timeline-content">
      <div class="sch-content" style="    margin-left: 136px;">
        <div class="sch-up">
          <div class="sch-icon btn-cancel">
            <i class="ti ti-x" style="font-size: 20px;"></i>
          </div>
        </div>
        <button class="btn-right btn-cancel"><a href="#"></a></button>
        <div class="sch-down">
          <div class="sch-text">
            <span style="display: inline-block;margin-top: 10px;font-weight: 600; color: #000000cc;">Bị hủy</span>
            <span style="display: block;font-size: 10px;transform: translateY(-7px);">{{bill.ngayCapNhat | date : 'hh:MM
              dd/MM/yyyy'}}</span>
          </div>
        </div>
      </div>

      <div class="sch-content">
        <div class="sch-up ">

          <div class="sch-icon btn-disaled">
            <i class="ti ti-truck " style="font-size: 0px;"></i>
          </div>
        </div>
        <button class="btn-right btn-disaled"><a href="#"></a></button>
        <div class="sch-down btn-disaled">
          <div class="sch-text">
            <span style="display: inline-block;margin-top: 10px;font-weight: 600; color: #000000cc;">Chờ giao</span>
            <span style="display: inline-block;font-size: 10px;transform: translateY(-7px);">1/1/2020 - 2/2/2020</span>
          </div>
        </div>
      </div>

      <div class="sch-content">
        <div class="sch-up">

          <div class="sch-icon btn-disaled">
            <i class="ti ti-truck-delivery" style="font-size: 0px;"></i>
          </div>
        </div>
        <button class="btn-right btn-disaled"><a href="#"></a></button>
        <div class="sch-down btn-disaled">
          <div class="sch-text">
            <span style="display: inline-block;margin-top: 10px;font-weight: 600; color: #000000cc;">Đang giao</span>
            <span style="display: inline-block;font-size: 10px;transform: translateY(-7px);">1/1/2020 - 2/2/2020</span>
          </div>
        </div>
      </div>

      <div class="sch-content">
        <div class="sch-up">

          <div class="sch-icon btn-disaled">
            <i class="ti ti-circle-check" style="font-size: 0px;"></i>
          </div>
        </div>
        <button class="btn-right btn-disaled"><a href="#"></a></button>
        <div class="sch-down btn-disaled">
          <div class="sch-text">
            <span style="display: inline-block;margin-top: 10px;font-weight: 600; color: #000000cc;">Thành công</span>
            <span style="display: inline-block;font-size: 10px;transform: translateY(-7px);">1/1/2020 - 2/2/2020</span>
          </div>
        </div>
      </div>

    </div>
  </div>

  <div class="sch-style-2" ng-if="bill.trangThai == 4 && history.length == 1">
    <div class="sch-timeline-content">
      <div class="sch-content" style="    margin-left: 136px;">
        <div class="sch-up">
          <div class="sch-icon">
            <i class="ti ti-circle-check" style="font-size: 20px;"></i>
          </div>
        </div>
        <button class="btn-right"><a href="#"></a></button>
        <div class="sch-down">
          <div class="sch-text">
            <span style="display: block;margin-top: 10px;font-weight: 600; color: #000000cc;">Thành công</span>
            <span style="display: block;font-size: 10px;transform: translateY(-7px);">{{bill.ngayTao | date : 'hh:MM
              dd/MM/yyyy'}}</span>
          </div>
        </div>
      </div>

      <div class="sch-content">
        <div class="sch-up ">

          <div class="sch-icon btn-disaled">
            <i class="ti ti-truck " style="font-size: 0px;"></i>
          </div>
        </div>
        <button class="btn-right btn-disaled"><a href="#"></a></button>
        <div class="sch-down btn-disaled">
          <div class="sch-text">
            <span style="display: inline-block;margin-top: 10px;font-weight: 600; color: #000000cc;">Chờ giao</span>
            <span style="display: inline-block;font-size: 10px;transform: translateY(-7px);">1/1/2020 - 2/2/2020</span>
          </div>
        </div>
      </div>

      <div class="sch-content">
        <div class="sch-up">

          <div class="sch-icon btn-disaled">
            <i class="ti ti-truck-delivery" style="font-size: 0px;"></i>
          </div>
        </div>
        <button class="btn-right btn-disaled"><a href="#"></a></button>
        <div class="sch-down btn-disaled">
          <div class="sch-text">
            <span style="display: inline-block;margin-top: 10px;font-weight: 600; color: #000000cc;">Đang giao</span>
            <span style="display: inline-block;font-size: 10px;transform: translateY(-7px);">1/1/2020 - 2/2/2020</span>
          </div>
        </div>
      </div>

      <div class="sch-content">
        <div class="sch-up">

          <div class="sch-icon btn-disaled">
            <i class="ti ti-circle-check" style="font-size: 0px;"></i>
          </div>
        </div>
        <button class="btn-right btn-disaled"><a href="#"></a></button>
        <div class="sch-down btn-disaled">
          <div class="sch-text">
            <span style="display: inline-block;margin-top: 10px;font-weight: 600; color: #000000cc;">Thành công</span>
            <span style="display: inline-block;font-size: 10px;transform: translateY(-7px);">1/1/2020 - 2/2/2020</span>
          </div>
        </div>
      </div>

    </div>
  </div>

  <div class="sch-style-2" ng-if="bill.trangThai == 1 && history.length >= 1">
    <div class="sch-timeline-content">
      <div class="sch-content" style="    margin-left: 136px;">
        <div class="sch-up">
          <div class="sch-icon">
            <i class="ti ti-checklist" style="font-size: 20px;"></i>
          </div>
        </div>
        <button class="btn-right"><a href="#"></a></button>
        <div class="sch-down">
          <div class="sch-text">
            <span style="display: block;margin-top: 10px;font-weight: 600; color: #000000cc;">Tạo hóa đơn</span>
            <span style="display: block;font-size: 10px;transform: translateY(-7px);">{{billState1.ngayTao | date
              : " HH:mm dd/MM/yyyy "}}</span>
          </div>
        </div>
      </div>

      <div class="sch-content">
        <div class="sch-up ">

          <div class="sch-icon btn-disaled">
            <i class="ti ti-truck " style="font-size: 20px;"></i>
          </div>
        </div>
        <button class="btn-right btn-disaled"><a href="#"></a></button>
        <div class="sch-down btn-disaled">
          <div class="sch-text">
            <span style="display: block;margin-top: 10px;font-weight: 600; color: #000000cc;">Chờ giao</span>
            <span style="display: block;font-size: 10px;transform: translateY(-7px);">1/1/2020 - 2/2/2020</span>
          </div>
        </div>
      </div>

      <div class="sch-content">
        <div class="sch-up">

          <div class="sch-icon btn-disaled">
            <i class="ti ti-truck-delivery" style="font-size: 20px;"></i>
          </div>
        </div>
        <button class="btn-right btn-disaled"><a href="#"></a></button>
        <div class="sch-down btn-disaled">
          <div class="sch-text">
            <span style="display: block;margin-top: 10px;font-weight: 600; color: #000000cc;">Đang giao</span>
            <span style="display: block;font-size: 10px;transform: translateY(-7px);">1/1/2020 - 2/2/2020</span>
          </div>
        </div>
      </div>

      <!-- <div class="sch-content">
        <div class="sch-up">

          <div class="sch-icon btn-disaled">
            <i class="ti ti-credit-card-pay" style="font-size: 20px;"></i>
          </div>
        </div>
        <button class="btn-right btn-disaled"><a href="#"></a></button>
        <div class="sch-down btn-disaled">
          <div class="sch-text">
            <span style="display: inline-block;margin-top: 10px;font-weight: 600; color: #000000cc;">Xác nhận thanh
              toán</span>
            <span style="display: inline-block;font-size: 10px;transform: translateY(-7px);">1/1/2020 - 2/2/2020</span>
          </div>
        </div>
      </div> -->

      <div class="sch-content">
        <div class="sch-up">

          <div class="sch-icon btn-disaled">
            <i class="ti ti-circle-check" style="font-size: 20px;"></i>
          </div>
        </div>
        <button class="btn-right btn-disaled"><a href="#"></a></button>
        <div class="sch-down btn-disaled">
          <div class="sch-text">
            <span style="display: block;margin-top: 10px;font-weight: 600; color: #000000cc;">Thành công</span>
            <span style="display: block;font-size: 10px;transform: translateY(-7px);">1/1/2020 - 2/2/2020</span>
          </div>
        </div>
      </div>

    </div>
  </div>

  <div class="sch-style-2" ng-if="bill.trangThai == 2 && history.length >= 1">
    <div class="sch-timeline-content">
      <div class="sch-content" style="    margin-left: 136px;">
        <div class="sch-up">
          <div class="sch-icon">
            <i class="ti ti-checklist" style="font-size: 20px;"></i>
          </div>
        </div>
        <button class="btn-right"><a href="#"></a></button>
        <div class="sch-down">
          <div class="sch-text">
            <span style="display: block;margin-top: 10px;font-weight: 600; color: #000000cc;">Tạo hóa đơn</span>
            <span style="display: block;font-size: 10px;transform: translateY(-7px);">{{billState1.ngayTao | date
              : "HH:mm dd/MM/yyyy"}}</span>
          </div>
        </div>
      </div>

      <div class="sch-content">
        <div class="sch-up ">

          <div class="sch-icon ">
            <i class="ti ti-truck " style="font-size: 20px;"></i>
          </div>
        </div>
        <button class="btn-right "><a href="#"></a></button>
        <div class="sch-down">
          <div class="sch-text">
            <span style="display: block;margin-top: 10px;font-weight: 600; color: #000000cc;">Chờ giao</span>
            <span style="display: block;font-size: 10px;transform: translateY(-7px);">{{billState2.ngayTao | date
              : "HH:mm dd/MM/yyyy"}}</span>
          </div>
        </div>
      </div>

      <div class="sch-content">
        <div class="sch-up">

          <div class="sch-icon btn-disaled">
            <i class="ti ti-truck-delivery" style="font-size: 20px;"></i>
          </div>
        </div>
        <button class="btn-right btn-disaled"><a href="#"></a></button>
        <div class="sch-down btn-disaled">
          <div class="sch-text">
            <span style="display: block;margin-top: 10px;font-weight: 600; color: #000000cc;">Đang giao</span>
            <span style="display: block;font-size: 10px;transform: translateY(-7px);">1/1/2020 - 2/2/2020</span>
          </div>
        </div>
      </div>

      <div class="sch-content">
        <div class="sch-up">

          <div class="sch-icon btn-disaled">
            <i class="ti ti-circle-check" style="font-size: 20px;"></i>
          </div>
        </div>
        <button class="btn-right btn-disaled"><a href="#"></a></button>
        <div class="sch-down btn-disaled">
          <div class="sch-text">
            <span style="display: block;margin-top: 10px;font-weight: 600; color: #000000cc;">Thành công</span>
            <span style="display: block;font-size: 10px;transform: translateY(-7px);">1/1/2020 - 2/2/2020</span>
          </div>
        </div>
      </div>

    </div>
  </div>

  <div class="sch-style-2" ng-if="bill.trangThai == 3 && history.length > 1">
    <div class="sch-timeline-content">
      <div class="sch-content" style="    margin-left: 136px;">
        <div class="sch-up">
          <div class="sch-icon">
            <i class="ti ti-checklist" style="font-size: 20px;"></i>
          </div>
        </div>
        <button class="btn-right"><a href="#"></a></button>
        <div class="sch-down">
          <div class="sch-text">
            <span style="display: block;margin-top: 10px;font-weight: 600; color: #000000cc;">Tạo hóa đơn</span>
            <span style="display: block;font-size: 10px;transform: translateY(-7px);">{{billState1.ngayTao | date
              : "HH:mm dd/MM/yyyy"}}</span>
          </div>
        </div>
      </div>

      <div class="sch-content">
        <div class="sch-up ">

          <div class="sch-icon ">
            <i class="ti ti-truck " style="font-size: 20px;"></i>
          </div>
        </div>
        <button class="btn-right "><a href="#"></a></button>
        <div class="sch-down">
          <div class="sch-text">
            <span style="display: block;margin-top: 10px;font-weight: 600; color: #000000cc;">Chờ giao</span>
            <span style="display: block;font-size: 10px;transform: translateY(-7px);">{{billState2.ngayTao | date
              : "HH:mm dd/MM/yyyy"}}</span>
          </div>
        </div>
      </div>

      <div class="sch-content">
        <div class="sch-up">

          <div class="sch-icon ">
            <i class="ti ti-truck-delivery" style="font-size: 20px;"></i>
          </div>
        </div>
        <button class="btn-right"><a href="#"></a></button>
        <div class="sch-down">
          <div class="sch-text">
            <span style="display: block;margin-top: 10px;font-weight: 600; color: #000000cc;">Đang giao</span>
            <span style="display: block;font-size: 10px;transform: translateY(-7px);">{{billState3.ngayTao | date
              : "HH:mm dd/MM/yyyy"}}</span>
          </div>
        </div>
      </div>

      <div class="sch-content">
        <div class="sch-up">

          <div class="sch-icon btn-disaled">
            <i class="ti ti-circle-check" style="font-size: 20px;"></i>
          </div>
        </div>
        <button class="btn-right btn-disaled"><a href="#"></a></button>
        <div class="sch-down btn-disaled">
          <div class="sch-text">
            <span style="display: inline-block;margin-top: 10px;font-weight: 600; color: #000000cc;">Thành công</span>
            <span style="display: inline-block;font-size: 10px;transform: translateY(-7px);">1/1/2020 - 2/2/2020</span>
          </div>
        </div>
      </div>

    </div>
  </div>

  <div class="sch-style-2" ng-if="bill.trangThai == 4 && history.length > 1">
    <div class="sch-timeline-content">
      <div class="sch-content" style="    margin-left: 136px;">
        <div class="sch-up">
          <div class="sch-icon">
            <i class="ti ti-checklist" style="font-size: 20px;"></i>
          </div>
        </div>
        <button class="btn-right"><a href="#"></a></button>
        <div class="sch-down">
          <div class="sch-text">
            <span style="display: block;margin-top: 10px;font-weight: 600; color: #000000cc;">Tạo hóa đơn</span>
            <span style="display: block;font-size: 10px;transform: translateY(-7px);">{{billState1.ngayTao | date
              : "HH:mm dd/MM/yyyy"}}</span>
          </div>
        </div>
      </div>

      <div class="sch-content">
        <div class="sch-up">

          <div class="sch-icon">
            <i class="ti ti-truck" style="font-size: 20px;"></i>
          </div>
        </div>
        <button class="btn-right"><a href="#"></a></button>
        <div class="sch-down">
          <div class="sch-text">
            <span style="display: block;margin-top: 10px;font-weight: 600; color: #000000cc;">Chờ giao</span>
            <span style="display: block;font-size: 10px;transform: translateY(-7px);">{{billState2.ngayTao | date
              : "HH:mm dd/MM/yyyy"}}</span>
          </div>
        </div>
      </div>

      <div class="sch-content">
        <div class="sch-up">

          <div class="sch-icon">
            <i class="ti ti-truck-delivery" style="font-size: 20px;"></i>
          </div>
        </div>
        <button class="btn-right"><a href="#"></a></button>
        <div class="sch-down">
          <div class="sch-text">
            <span style="display: block;margin-top: 10px;font-weight: 600; color: #000000cc;">Đang giao</span>
            <span style="display: block;font-size: 10px;transform: translateY(-7px);">{{billState3.ngayTao | date
              : "HH:mm dd/MM/yyyy"}}</span>
          </div>
        </div>
      </div>

      <div class="sch-content">
        <div class="sch-up">

          <div class="sch-icon">
            <i class="ti ti-circle-check" style="font-size: 20px;"></i>
          </div>
        </div>
        <button class="btn-right"><a href="#"></a></button>
        <div class="sch-down">
          <div class="sch-text">
            <span style="display: block;margin-top: 10px;font-weight: 600; color: #000000cc;">Thành công</span>
            <span style="display: block;font-size: 10px;transform: translateY(-7px);">{{billState4.ngayTao | date
              : "HH:mm dd/MM/yyyy"}}</span>
          </div>
        </div>
      </div>

    </div>
  </div>

  <div class="sch-style-2" ng-if="bill.trangThai == 6 && history.length > 1">
    <div class="sch-timeline-content">
      <div class="sch-content" style="    margin-left: 80px;">
        <div class="sch-up">
          <div class="sch-icon">
            <i class="ti ti-checklist" style="font-size: 20px;"></i>
          </div>
        </div>
        <button class="btn-right"><a href="#"></a></button>
        <div class="sch-down">
          <div class="sch-text">
            <span style="display: block;margin-top: 10px;font-weight: 600; color: #000000cc;">Tạo hóa đơn</span>
            <span style="display: block;font-size: 10px;transform: translateY(-7px);">{{billState1.ngayTao | date
              : "HH:mm dd/MM/yyyy"}}</span>
          </div>
        </div>
      </div>

      <div class="sch-content">
        <div class="sch-up">

          <div class="sch-icon">
            <i class="ti ti-truck" style="font-size: 20px;"></i>
          </div>
        </div>
        <button class="btn-right"><a href="#"></a></button>
        <div class="sch-down">
          <div class="sch-text">
            <span style="display: block;margin-top: 10px;font-weight: 600; color: #000000cc;">Chờ giao</span>
            <span style="display: block;font-size: 10px;transform: translateY(-7px);">{{billState2.ngayTao | date
              : "HH:mm dd/MM/yyyy"}}</span>
          </div>
        </div>
      </div>

      <div class="sch-content">
        <div class="sch-up">

          <div class="sch-icon">
            <i class="ti ti-truck-delivery" style="font-size: 20px;"></i>
          </div>
        </div>
        <button class="btn-right"><a href="#"></a></button>
        <div class="sch-down">
          <div class="sch-text">
            <span style="display: block;margin-top: 10px;font-weight: 600; color: #000000cc;">Đang giao</span>
            <span style="display: block;font-size: 10px;transform: translateY(-7px);">{{billState3.ngayTao | date
              : "HH:mm dd/MM/yyyy"}}</span>
          </div>
        </div>
      </div>

      <div class="sch-content">
        <div class="sch-up">

          <div class="sch-icon">
            <i class="ti ti-circle-check" style="font-size: 20px;"></i>
          </div>
        </div>
        <button class="btn-right"><a href="#"></a></button>
        <div class="sch-down">
          <div class="sch-text">
            <span style="display: block;margin-top: 10px;font-weight: 600; color: #000000cc;">Thành công</span>
            <span style="display: block;font-size: 10px;transform: translateY(-7px);">{{billState4.ngayTao | date
              : "HH:mm dd/MM/yyyy"}}</span>
          </div>
        </div>
      </div>

      <div class="sch-content">
        <div class="sch-up">

          <div class="sch-icon">
            <i class="ti  ti-a-b-2" style="font-size: 20px;"></i>
          </div>
        </div>
        <button class="btn-right"><a href="#"></a></button>
        <div class="sch-down">
          <div class="sch-text">
            <span style="display: block;margin-top: 10px;font-weight: 600; color: #000000cc;">Trả hàng</span>
            <span style="display: block;font-size: 10px;transform: translateY(-7px);">{{billState6.ngayTao | date
              : "HH:mm dd/MM/yyyy"}}</span>
          </div>
        </div>
      </div>

    </div>
  </div>

  <!-- button -->
  <div style="display: flex;justify-content: space-between;" ng-if="bill.trangThai == 4 && history.length == 1">
    <div style="display: flex;justify-content: space-between;width: 33%;">
      <button class="btn btn-primary" ng-click="print()">
        Xuất hóa đơn
      </button>
    </div>

    <div style="display: flex;justify-content: space-between;">
      <button class="btn btn-danger" data-bs-toggle="modal" data-bs-target="#historyModal">
        Lịch sử
      </button>
    </div>
  </div>

  <div style="display: flex;justify-content: space-between;" ng-if="bill.trangThai == 1 && history.length >= 1">
    <div style="display: flex;width: 33%;">
      <button class="btn btn-primary" data-bs-toggle="modal" data-bs-target="#confirmModal">
        Xác nhận
      </button>
      <button class="btn btn-danger" data-bs-toggle="modal" data-bs-target="#cancelModal" style="margin-left: 10px;">
        Hủy
      </button>
    </div>

    <div style="display: flex;justify-content: space-between;">
      <button class="btn btn-danger" data-bs-toggle="modal" data-bs-target="#historyModal">
        Lịch sử
      </button>
    </div>
  </div>

  <div style="display: flex;justify-content: space-between;" ng-if="bill.trangThai == 2 && history.length > 1">
    <div style="display: flex;width: 60%;">
      <button class="btn btn-primary" data-bs-toggle="modal" data-bs-target="#shipModal">
        Vận chuyển
      </button>
      <button class="btn btn-warning" ng-click="print()" style="margin-left: 10px;">
        Xuất hóa đơn
      </button>
      <button class="btn btn-danger" data-bs-toggle="modal" data-bs-target="#cancelModal" style="margin-left: 10px;">
        Hủy
      </button>
    </div>

    <div style="display: flex;justify-content: space-between;">
      <button class="btn btn-danger" data-bs-toggle="modal" data-bs-target="#historyModal">
        Lịch sử
      </button>
    </div>
  </div>

  <div style="display: flex;justify-content: space-between;" ng-if="bill.trangThai == 5 && history.length > 1">
    <div style="display: flex;width: 60%;">

    </div>

    <div style="display: flex;justify-content: space-between;">
      <button class="btn btn-danger" data-bs-toggle="modal" data-bs-target="#historyModal">
        Lịch sử
      </button>
    </div>
  </div>

  <div style="display: flex;justify-content: space-between;" ng-if="bill.trangThai == 6 && history.length > 1">
    <div style="display: flex;width: 60%;">

    </div>

    <div style="display: flex;justify-content: space-between;">
      <button class="btn btn-danger" data-bs-toggle="modal" data-bs-target="#historyModal">
        Lịch sử
      </button>
    </div>
  </div>

  <div style="display: flex;justify-content: space-between;" ng-if="bill.trangThai == 3 && history.length > 1">
    <div style="display: flex;width: 33%;">
      <button class="btn btn-primary" data-bs-toggle="modal" data-bs-target="#successModal">
        Hoàn thành
      </button>
      <button class="btn btn-warning" ng-click="print()" style="margin-left: 10px;">
        Xuất hóa đơn
      </button>
      <button class="btn btn-danger" id="btnCancelShip" data-bs-toggle="modal" data-bs-target="#cancelModal"
        style="margin-left: 10px;">
        Hủy
      </button>
    </div>

    <div style="display: flex;justify-content: space-between;">
      <button class="btn btn-danger" data-bs-toggle="modal" data-bs-target="#historyModal">
        Lịch sử
      </button>
    </div>
  </div>

  <div style="display: flex;justify-content: space-between;" ng-if="bill.trangThai == 4 && history.length > 1">
    <div style="display: flex;width: 33%;">
      <button class="btn btn-warning" ng-click="print()">
        Xuất hóa đơn
      </button>
    </div>

    <div style="display: flex;justify-content: space-between;">
      <button class="btn btn-danger" data-bs-toggle="modal" data-bs-target="#historyModal">
        Lịch sử
      </button>
    </div>
  </div>

</div>

<div class="card p-3 shadow">
  <!-- bread crumbs -->
  <div class="d-sm-flex d-block align-items-center justify-content-between mb-9">
    <div class="mb-3 mb-sm-0">
      <i class="ti ti-receipt-dollar" style="display: inline-block;font-size: 16px;color: #5D87FF;"></i>
      <span style="color: black;display: inline-block;font-size: 16px;color: #5D87FF;font-weight: 500;">Thông tin đơn
        hàng</span>
    </div>
  </div>

  <!-- body -->
  <div style="display: flex;justify-content: space-between;">

    <div style="width: 40%;">

      <div style="margin-bottom: 10px;display: flex;justify-content: space-between;">
        <span style="
          display: inline-block;
         font-size: 14px;
         font-weight: 600;
          color: #333">
          Trạng thái:
        </span>
        <span style="
        display: inline-block;
        font-size: 14px;
        font-weight: 600; color: #eb4528" ng-if="bill.trangThai == 1">
          Tạo đơn hàng
        </span>

        <span style="
        display: inline-block;
        font-size: 14px;
        font-weight: 600; color: #eb4528" ng-if="bill.trangThai == 2">
          Chờ giao
        </span>

        <span style="
        display: inline-block;
        font-size: 14px;
        font-weight: 600; color: #eb4528" ng-if="bill.trangThai == 3">
          Đang giao
        </span>


        <span style="
        display: inline-block;
        font-size: 14px;
        font-weight: 600; color: #eb4528" ng-if="bill.trangThai == 4">
          Thành công
        </span>

        <span style="
        display: inline-block;
        font-size: 14px;
        font-weight: 600; color: #eb4528" ng-if="bill.trangThai == 5">
          Bị hủy
        </span>

        <span style="
        display: inline-block;
        font-size: 14px;
        font-weight: 600; color: #eb4528" ng-if="bill.trangThai == 6">
          Trả hàng
        </span>

        <span style="
        display: inline-block;
        font-size: 14px;
        font-weight: 600; color: #eb4528" ng-if="bill.trangThai == 7">
          Đã thanh toán
        </span>
      </div>

      <div style="margin-bottom: 10px;display: flex;justify-content: space-between;">
        <span style="
          display: inline-block;
         font-size: 14px;
         font-weight: 600;
          color: #333">
          Mã đơn hàng:
        </span>
        <span style="
        display: inline-block;
       font-size: 14px;
       font-weight: 600; color: #eb4528">
          {{bill.ma}}
        </span>
      </div>

      <div style="margin-bottom: 10px;display: flex;justify-content: space-between;">
        <span style="
          display: inline-block;
         font-size: 14px;
         font-weight: 600;
          color: #333">
          Loại đơn hàng:
        </span>
        <span style="
        display: inline-block;
       font-size: 14px;
       font-weight: 600; color: #eb4528">
          {{bill.loaiHoaDon == 0 || bill.loaiHoaDon == null ? "Tại quầy" : "Online"}}
        </span>
      </div>

      <div style="margin-bottom: 10px;display: flex;justify-content: space-between;" ng-if="bill.idVoucher != null">
        <span style="
          display: inline-block;
         font-size: 14px;
         font-weight: 600;
         color: #333">
          Voucher:
        </span>
        <span style="
        display: inline-block;
       font-size: 14px;
       font-weight: 600; color: #eb4528" ng-if="bill.idVoucher != null">
          [{{bill.idVoucher.ma}}] {{bill.idVoucher.ten}}
        </span>

        <span style="
        display: inline-block;
       font-size: 14px;
       font-weight: 600; color: #eb4528" ng-if="bill.idVoucher == null">
          không áp dụng
        </span>
      </div>

    </div>
    <div style="width: 50%;">

      <div style="margin-bottom: 10px;display: flex;justify-content: space-between;">
        <span style="
          display: inline-block;
         font-size: 14px;
         font-weight: 600;
          color: #333">
          Tổng tiền hàng
        </span>
        <span style="
        display: inline-block;
       font-size: 14px;
       font-weight: 600; color: #eb4528">
          {{formatToVND(bill.tongTien)}}
        </span>
      </div>
      <div style="margin-bottom: 10px;display: flex;justify-content: space-between;">
        <span style="
          display: inline-block;
         font-size: 14px;
         font-weight: 600;
          color: #333">
          Phí vận chuyển
        </span>
        <span style="
        display: inline-block;
       font-size: 14px;
       font-weight: 600; color: #eb4528">
          {{bill.phiVanChuyen == null ? formatToVND(0) : formatToVND(bill.phiVanChuyen)}}
        </span>
      </div>

      <div style="margin-bottom: 10px;display: flex;justify-content: space-between;" ng-if="bill.idVoucher != null">
        <span style="
          display: inline-block;
         font-size: 14px;
         font-weight: 600;
          color: #333">
          Giảm giá
        </span>
        <span style="
        display: inline-block;
       font-size: 14px;
       font-weight: 600; color: #eb4528">
          {{formatToVND(bill.soPhanTramKhuyenMai * bill.tongTien / 100)}} ({{bill.soPhanTramKhuyenMai}}%)
        </span>
      </div>

      <div style="margin-bottom: 10px;display: flex;justify-content: space-between;">
        <span style="
          display: inline-block;
         font-size: 14px;
         font-weight: 600;
          color: #333">
          {{ bill.phuongThucThanhToan !== null ? "Đã thanh toán :" : "Cần phải thanh toán :"}}
        </span>
        <span style="
        display: inline-block;
       font-size: 14px;
       font-weight: 600; color: #eb4528">
          {{formatToVND(bill.tongTienSauGiam)}}
        </span>
      </div>
    </div>

  </div>
</div>

<div class="card p-3 shadow">
  <!-- bread crumbs -->
  <div class="d-sm-flex d-block align-items-center justify-content-between mb-9">
    <div class="mb-3 mb-sm-0">
      <i class="ti ti-receipt-dollar" style="display: inline-block;font-size: 16px;color: #5D87FF;"></i>
      <span style="color: black;display: inline-block;font-size: 16px;color: #5D87FF;font-weight: 500;">Thông tin khách
        hàng</span>
    </div>

    <div>
      <button class="btn btn-primary" ng-if="(bill.trangThai == 2 || bill.trangThai == 1) && bill.tenNguoiNhan != null"
        data-bs-toggle="modal" data-bs-target="#customerEdit" ng-click="editCustomer()">
        <i class="ti ti-edit" style="
                            display: inline-block;
                            font-size: 18px;
                            transform: translateY(2px);
                        "></i>
        Sửa khách hàng</button>
    </div>
  </div>

  <div style="display: flex;justify-content: space-between;" ng-if="bill.tenNguoiNhan != null">

    <div style="width: 45%;">

      <div style="margin-bottom: 10px;display: flex;justify-content: space-between;">
        <span style="
          display: inline-block;
         font-size: 14px;
         font-weight: 600;
          color: #333">
          Tên khách hàng:
        </span>
        <span style="
        display: inline-block;
       font-size: 14px;
       font-weight: 600; color: #eb4528">
          {{bill.tenNguoiNhan}}
        </span>
      </div>

      <div style="margin-bottom: 10px;display: flex;justify-content: space-between;">
        <span style="
          display: inline-block;
         font-size: 14px;
         font-weight: 600;
          color: #333">
          Số điện thoại:
        </span>
        <span style="
        display: inline-block;
       font-size: 14px;
       font-weight: 600; color: #eb4528">
          {{bill.sdtNguoiNhan}}
        </span>
      </div>

    </div>
    <div style="width: 50%;">

      <div style="margin-bottom: 10px;display: flex;justify-content: space-between;">
        <span style="
          display: inline-block;
         font-size: 14px;
         font-weight: 600;
          color: #333">
          Email:
        </span>
        <span style="
        display: inline-block;
       font-size: 14px;
       font-weight: 600; color: #eb4528">
          {{bill.email == null ?"Không có " : bill.email}}
        </span>
      </div>

      <div style="margin-bottom: 10px;display: flex;justify-content: space-between  ;">
        <span style="
          display: inline-block;
         font-size: 14px;
         font-weight: 600;
         width: 100px; color: #333">
          Địa chỉ:
        </span>
        <span style="
        display: inline-block;
       font-size: 14px;
       font-weight: 600; color: #eb4528" ng-if="bill.diaChi != null">
          {{ bill.diaChi + ", " + bill.xa + ", " + bill.phuong + ", " + bill.tinh }}
        </span>
        <span style="
        display: inline-block;
       font-size: 14px;
       font-weight: 600; color: #eb4528" ng-if="bill.diaChi == null">
          {{ bill.idKhachHang.diaChi + ", " + bill.idKhachHang.xa + ", " + bill.idKhachHang.phuong + ", " +
          bill.idKhachHang.tinh }}
        </span>
      </div>
    </div>

  </div>

  <div style="display: flex;justify-content: space-between;" ng-if="bill.tenNguoiNhan == null">
    <div style="width: 50%;">

      <div style="margin-bottom: 10px;display: flex;justify-content: space-between;">
        <span style="
          display: inline-block;
         font-size: 14px;
         font-weight: 600;
          color: #333">
          Loại khách hàng:
        </span>
        <span style="
        display: inline-block;
       font-size: 14px;
       font-weight: 600; color: #eb4528">
          Khách lẻ
        </span>
      </div>

    </div>
  </div>

</div>

<div class="card p-3 shadow">
  <!-- bread crumbs -->
  <div class="d-sm-flex d-block align-items-center justify-content-between mb-9">
    <div class="mb-3 mb-sm-0">
      <i class="ti ti-receipt-dollar" style="display: inline-block;font-size: 16px;color: #5D87FF;"></i>
      <span style="color: black;display: inline-block;font-size: 16px;color: #5D87FF;font-weight: 500;">
        Phương thức thanh toán
      </span>
    </div>

    <div>
      <button class="btn btn-primary" ng-if="moneyChange < bill.tongTienSauGiam && bill.trangThai !== 5" data-bs-toggle="modal"
        ng-click="loadMoneyPayment()" data-bs-target="#paymentModal">
        <i class="ti ti-plus" style="
                          display: inline-block;
                          font-size: 18px;
                          transform: translateY(2px);
                      "></i>
        Xác nhận thanh toán</button>

        <button class="btn btn-danger" data-bs-toggle="modal"
        ng-if="moneyRefund > moneyRefuned "
        ng-click="loadMoneyPayment()" data-bs-target="#paymentRefundModal">
        <i class="ti ti-a-b-2" style="
                          display: inline-block;
                          font-size: 18px;
                          transform: translateY(2px);
                      "></i>
        Hoàn tiền</button>

      <!-- <button class="btn btn-danger" ng-if="moneyChange > bill.tongTienSauGiam" data-bs-toggle="modal"
        data-bs-target="#productListModal" ng-click="loadProductList()">
        <i class="ti ti-a-b-2" style="
                          display: inline-block;
                          font-size: 18px;
                          transform: translateY(2px);
                      "></i>
        Xác nhận hoàn tiền</button> -->
    </div>
  </div>

  <!-- body -->
  <div ng-if="billDetails.content.length > 0">
    <table class="table" style="text-align: center;">
      <thead class="text-dark fs-4" style="background-color: rgb(218 212 212 / 24%)">
        <tr>
          <th style="width: 7%;">
            <h6 class="fw-semibold mb-0 text-center" style="border-right: 1px solid #b1acac;">#</h6>
          </th>
          <th class="border-bottom-0 text-center" style="width: 45%;">
            <h6 class="fw-semibold mb-0" style="border-right: 1px solid #b1acac;">Phương thức thanh toán</h6>
          </th>
          <th class="border-bottom-0 text-center" style="width: 20%;">
            <h6 class="fw-semibold mb-0" style="border-right: 1px solid #b1acac;">Số tiền thanh toán</h6>
          </th>
          <th class="border-bottom-0 text-center" style="width: 17%;">
            <h6 class="fw-semibold mb-0">Trạng thái</h6>
          </th>

        </tr>
      </thead>
      <tbody>
        <tr ng-repeat="paymentMethod in paymentMethods">
          <td>{{$index + 1}}</td>
          <td style="color: #333; font-weight: 600;">{{paymentMethod.loaiThanhToan == 0 ? "Tiền mặt" :
            paymentMethod.loaiThanhToan == 1 ?
            "Chuyển khoản" : "Thanh toán khi nhận hàng"}}</td>
          <td style="color: #eb4528; font-weight: 600;">{{formatToVND(paymentMethod.soTienThanhToan)}}</td>
          <td>
            <div class="d-flex align-items-center gap-2" ng-if="paymentMethod.trangThai === false">
              <span class="badge bg-danger rounded-3 fw-semibold" style="    
                          padding: 11px;
                          font-size: 11px;">Đã hoàn tiền</span>
            </div>
            <div class="d-flex align-items-center gap-2" ng-if="paymentMethod.trangThai === true">
              <span class="badge bg-success rounded-3 fw-semibold" style="    
                          padding: 11px;
                          font-size: 11px;">Đã thanh toán</span>
            </div>
          </td>
        </tr>
      </tbody>

    </table>

  </div>
</div>

<!-- product -->
<div class="card p-3 shadow">
  <!-- bread crumbs -->
  <div class="d-sm-flex d-block align-items-center justify-content-between mb-9">
    <div class="mb-3 mb-sm-0">
      <i class="ti ti-receipt-dollar" style="display: inline-block;font-size: 16px;color: #5D87FF;"></i>
      <span style="color: black;display: inline-block;font-size: 16px;color: #5D87FF;font-weight: 500;">Danh sách sản
        phẩm
      </span>
    </div>
    <div>
      <button class="btn btn-primary" ng-if="bill.trangThai == 2 || bill.trangThai == 1" data-bs-toggle="modal"
        data-bs-target="#productListModal" ng-click="loadProductList()">
        <i class="ti ti-plus" style="
                            display: inline-block;
                            font-size: 18px;
                            transform: translateY(2px);
                        "></i>
        Thêm sản phẩm</button>

      <button class="btn btn-danger" ng-if="bill.trangThai == 4" data-bs-toggle="modal" data-bs-target="#refundModal">
        <i class="ti ti-credit-card-refund" style="
                              display: inline-block;
                              font-size: 18px;
                              transform: translateY(2px);
                          "></i>
        Trả hàng toàn bộ</button>
    </div>
  </div>

  <!-- body -->
  <div ng-if="billDetails.content.length > 0">
    <table class="table">
      <thead class="text-dark fs-4" style="background-color: rgb(218 212 212 / 24%)">
        <tr>
          <th style="width: 7%;">
            <h6 class="fw-semibold mb-0 text-center" style="border-right: 1px solid #b1acac;">#</h6>
          </th>
          <th class="border-bottom-0 text-center" style="width: 45%;">
            <h6 class="fw-semibold mb-0" style="border-right: 1px solid #b1acac;">Sản phẩm</h6>
          </th>
          <th class="border-bottom-0 text-center" style="width: 20%;">
            <h6 class="fw-semibold mb-0" style="border-right: 1px solid #b1acac;">Số lượng</h6>
          </th>
          <th class="border-bottom-0 text-center" style="width: 17%;">
            <h6 class="fw-semibold mb-0">Tổng tiền</h6>
          </th>
          <th class="border-bottom-0 text-center" style="width: 17%;" ng-if="bill.trangThai == 4">
            <h6 class="fw-semibold mb-0">Thao tác</h6>
          </th>

        </tr>
      </thead>
      <tbody>
        <tr ng-repeat="billDetail in billDetails.content" ng-if="billDetail.trangThai == 1">
          <td class="border-bottom-0">
            <h6 class="fw-semibold mb-0"> {{$index + 1}}</h6>
          </td>
          <td class="border-bottom-0">
            <img ng-repeat="image in getAllImagesByIDProductDetail(billDetail.idSanPhamChiTiet.id,'product')"
              style="width: 100px;height: 100px;">
            <div style="justify-content: space-between;display: flex;">
              <div class="image-product-{{billDetail.idSanPhamChiTiet.id}}" style="width: 40%;">
              </div>

              <div style="width: 58%;">
                <span style="
                    display: inline-block;
                    color: #333;
                    font-size: 14px;
                    font-weight: 600;
                    transform: translateY(-5px);
                    ">{{billDetail.idSanPhamChiTiet.idSanPham.ten}}[{{billDetail.idSanPhamChiTiet.idMauSac.ten}}
                  - {{billDetail.idSanPhamChiTiet.idKichCo.kichCo}}]</span>

                <div style="display: flex;font-size: 12px;transform: translateY(-7px);">
                  <span>Màu: {{billDetail.idSanPhamChiTiet.idMauSac.ten}}</span>
                  <span style="margin-left: 10px;">Kích cỡ:
                    {{billDetail.idSanPhamChiTiet.idKichCo.kichCo}}</span>
                </div>

                <div style="display: flex;font-size: 12px;transform: translateY(-7px);">
                  <span>Thương hiệu: {{billDetail.idSanPhamChiTiet.idSanPham.idThuongHieu.ten}}</span>
                </div>

                <span style="
                display: inline-block;
                color: red;
                font-size: 12px;
                font-weight: 800;
                ">{{formatToVND(billDetail.donGiaSauKhiGiam == null ?
                  billDetail.donGia : billDetail.donGiaSauKhiGiam)}}</span>
                <span style="
                      display: inline-block;
                      color: rgb(150, 150, 150);
                      font-size: 10px;
                      font-weight: 800;
                      text-decoration: line-through;
                      " ng-if="billDetail.donGiaSauKhiGiam != null">{{formatToVND(billDetail.donGia)}}</span>


              </div>
            </div>
          </td>
          <td class="border-bottom-0" style="display: flex;justify-content: space-between;">
            <div ng-if="bill.trangThai == 1 || bill.trangThai == 2">
              <button class="btn btn-sm btn-outline-muted"
                style="width: 33.3%;border-radius: 0px;border-top-left-radius: 5px;border-bottom-left-radius: 5px;height: 40px;"
                ng-click="minusQuantity(billDetail)">
                <i class="ti ti-minus" style="font-size: 12px;"></i>
              </button>
              <input type="number" class="btn btn-sm btn-outline-muted text-center"
                onkeydown="return event.keyCode !== 69 && event.keyCode !== 187 && event.keyCode !== 189"
                style="width: 29.3%;height: 40px;border-radius: 0;border-left: 0px;border-right: 0px;font-size: 14px;"
                ng-model="billDetail.soLuong" ng-change="changeQuantity(billDetail)" disabled
                id="bill-detail-quantity-{{billDetail.id}}">
              <button class="btn btn-sm btn-outline-muted"
                style="width: 33%;border-radius: 0px;border-top-right-radius: 5px;border-bottom-right-radius: 5px;height: 40px;"
                ng-click="plusQuantity(billDetail)">
                <i class="ti ti-plus" style="font-size: 12px;"></i>
              </button>
            </div>

            <div ng-if="bill.trangThai == 4 || bill.trangThai == 3 || bill.trangThai == 5 || bill.trangThai == 6"
              style="text-align: center;margin-left: 54px;">
              <button class="btn btn-outline-muted" disabled>{{billDetail.soLuong}}</button>
            </div>

          </td>
          <td style="
                color: #eb4528;
                font-size: 14px;
                font-weight: 800;
                text-align: center;
                " class="border-bottom-0">
            {{formatToVND(billDetail.donGiaSauKhiGiam == null ?
            (billDetail.donGia * billDetail.soLuong) : billDetail.donGiaSauKhiGiam * billDetail.soLuong)}}
          </td>
          <td ng-if="bill.trangThai == 4">
            <button class="btn btn-danger" data-bs-toggle="modal" data-bs-target="#billDetailSingleRefund"
              ng-click="loadProductRefund(billDetail)()">
              <i class="ti  ti-a-b-2" style="
                              display: inline-block;
                              font-size: 18px;
                              transform: translateY(2px);
                          "></i>
            </button>
          </td>
        </tr>

      </tbody>
    </table>


    <!-- Pagination -->
    <span ng-show="!=0">
      <uib-pagination items-per-page="itemsPerPageBillDetails" total-items="totalItemBillDetails"
        ng-model="currentPageBillDetails" class="pagination-sm" previous-text="‹" next-text="›" first-text="«"
        last-text="»" style="
              width: 16%;
              margin-left: auto;
              margin-right: auto;
              " max-size="3" ng-change="pageChangedBillDetails()"></uib-pagination>
    </span>

    
  </div>

</div>

<div class="card p-3 shadow">
  <!-- bread crumbs -->
  <div class="d-sm-flex d-block align-items-center justify-content-between mb-9">
    <div class="mb-3 mb-sm-0">
      <i class="ti ti-receipt-dollar" style="display: inline-block;font-size: 16px;color: #5D87FF;"></i>
      <span style="color: black;display: inline-block;font-size: 16px;color: #5D87FF;font-weight: 500;">
        Danh sách sản phẩm trả hàng
      </span>
    </div>
    <div>
     
    </div>
  </div>

  <!-- body -->
  <div ng-if="billDetailRefunds.length > 0">
    <table class="table">
      <thead class="text-dark fs-4" style="background-color: rgb(218 212 212 / 24%)">
        <tr>
          <th style="width: 7%;">
            <h6 class="fw-semibold mb-0 text-center" style="border-right: 1px solid #b1acac;">#</h6>
          </th>
          <th class="border-bottom-0 text-center" style="width: 45%;">
            <h6 class="fw-semibold mb-0" style="border-right: 1px solid #b1acac;">Sản phẩm</h6>
          </th>
          <th class="border-bottom-0 text-center" style="width: 20%;">
            <h6 class="fw-semibold mb-0" style="border-right: 1px solid #b1acac;">Số lượng</h6>
          </th>
          <th class="border-bottom-0 text-center" style="width: 17%;">
            <h6 class="fw-semibold mb-0">Tổng tiền</h6>
          </th>
          <th class="border-bottom-0 text-center" style="width: 17%;" ng-if="bill.trangThai == 4">
            <h6 class="fw-semibold mb-0">Thao tác</h6>
          </th>

        </tr>
      </thead>
      <tbody>
        <tr ng-repeat="billDetail in billDetailRefunds" ng-if="billDetail.trangThai == 2">
          <td class="border-bottom-0">
            <h6 class="fw-semibold mb-0"> {{$index + 1}}</h6>
          </td>
          <td class="border-bottom-0">
            <img ng-repeat="image in getAllImagesByIDProductDetail(billDetail.idSanPhamChiTiet.id,'product')"
              style="width: 100px;height: 100px;">
            <div style="justify-content: space-between;display: flex;">
              <div class="image-product-{{billDetail.idSanPhamChiTiet.id}}" style="width: 40%;">
              </div>

              <div style="width: 58%;">
                <span style="
                    display: inline-block;
                    color: #333;
                    font-size: 14px;
                    font-weight: 600;
                    transform: translateY(-5px);
                    ">{{billDetail.idSanPhamChiTiet.idSanPham.ten}}[{{billDetail.idSanPhamChiTiet.idMauSac.ten}}
                  - {{billDetail.idSanPhamChiTiet.idKichCo.kichCo}}]</span>

                <div style="display: flex;font-size: 12px;transform: translateY(-7px);">
                  <span>Màu: {{billDetail.idSanPhamChiTiet.idMauSac.ten}}</span>
                  <span style="margin-left: 10px;">Kích cỡ:
                    {{billDetail.idSanPhamChiTiet.idKichCo.kichCo}}</span>
                </div>

                <div style="display: flex;font-size: 12px;transform: translateY(-7px);">
                  <span>Thương hiệu: {{billDetail.idSanPhamChiTiet.idSanPham.idThuongHieu.ten}}</span>
                </div>

                <span style="
                display: inline-block;
                color: red;
                font-size: 12px;
                font-weight: 800;
                ">{{formatToVND(billDetail.donGiaSauKhiGiam == null ?
                  billDetail.donGia : billDetail.donGiaSauKhiGiam)}}</span>
                <span style="
                      display: inline-block;
                      color: rgb(150, 150, 150);
                      font-size: 10px;
                      font-weight: 800;
                      text-decoration: line-through;
                      " ng-if="billDetail.donGiaSauKhiGiam != null">{{formatToVND(billDetail.donGia)}}</span>


              </div>
            </div>
          </td>
          <td class="border-bottom-0" style="display: flex;justify-content: space-between;">
            <div ng-if="bill.trangThai == 1 || bill.trangThai == 2">
              <button class="btn btn-sm btn-outline-muted"
                style="width: 33.3%;border-radius: 0px;border-top-left-radius: 5px;border-bottom-left-radius: 5px;height: 40px;"
                ng-click="minusQuantity(billDetail)">
                <i class="ti ti-minus" style="font-size: 12px;"></i>
              </button>
              <input type="number" class="btn btn-sm btn-outline-muted text-center"
                onkeydown="return event.keyCode !== 69 && event.keyCode !== 187 && event.keyCode !== 189"
                style="width: 29.3%;height: 40px;border-radius: 0;border-left: 0px;border-right: 0px;font-size: 14px;"
                ng-model="billDetail.soLuong" ng-change="changeQuantity(billDetail)" disabled
                id="bill-detail-quantity-{{billDetail.id}}">
              <button class="btn btn-sm btn-outline-muted"
                style="width: 33%;border-radius: 0px;border-top-right-radius: 5px;border-bottom-right-radius: 5px;height: 40px;"
                ng-click="plusQuantity(billDetail)">
                <i class="ti ti-plus" style="font-size: 12px;"></i>
              </button>
            </div>

            <div ng-if="bill.trangThai == 4 || bill.trangThai == 3 || bill.trangThai == 5 || bill.trangThai == 6"
              style="text-align: center;margin-left: 54px;">
              <button class="btn btn-outline-muted" disabled>{{billDetail.soLuong}}</button>
            </div>

          </td>
          <td style="
                color: #eb4528;
                font-size: 14px;
                font-weight: 800;
                text-align: center;
                " class="border-bottom-0">
            {{formatToVND(billDetail.donGiaSauKhiGiam == null ?
            (billDetail.donGia * billDetail.soLuong) : billDetail.donGiaSauKhiGiam * billDetail.soLuong)}}
          </td>
          <td ng-if="bill.trangThai == 4">
            <button class="btn btn-danger" data-bs-toggle="modal" data-bs-target="#billDetailSingleRefund"
              ng-click="loadProductRefund(billDetail)()">
              <i class="ti  ti-a-b-2" style="
                              display: inline-block;
                              font-size: 18px;
                              transform: translateY(2px);
                          "></i>
            </button>
          </td>
        </tr>

      </tbody>
    </table>


    <!-- Pagination -->
    <span ng-show="!=0">
      <uib-pagination items-per-page="itemsPerPageBillDetails" total-items="totalItemBillDetails"
        ng-model="currentPageBillDetails" class="pagination-sm" previous-text="‹" next-text="›" first-text="«"
        last-text="»" style="
              width: 16%;
              margin-left: auto;
              margin-right: auto;
              " max-size="3" ng-change="pageChangedBillDetails()"></uib-pagination>
    </span>

    
  </div>

</div>

<!-- invoice -->

<div id="invoice" hidden>
  <table width="100%" border="0" cellpadding="0" cellspacing="0" align="center" class="fullTable" bgcolor="#e1e1e1">
    <tr>
      <td>
        <table width="600" border="0" cellpadding="0" cellspacing="0" align="center" class="fullTable"
          bgcolor="#ffffff" style="border-radius: 10px 10px 0 0;">
          <tr class="hiddenMobile">
            <td height="40"></td>
          </tr>

          <tr>
            <td>
              <table width="480" border="0" cellpadding="0" cellspacing="0" align="center" class="fullPadding">
                <tbody>
                  <tr>
                    <td>
                      <table width="220" border="0" cellpadding="0" cellspacing="0" align="left" class="col">
                        <tbody>
                          <tr>
                            <td
                              style="font-size: 12px; color: #5b5b5b; font-family: 'Open Sans', sans-serif; line-height: 18px; vertical-align: top; text-align: left;">
                              <div height="40" style="color: #5D87FF; font-weight: 700;">THE SNEAKER HOUSE</div>
                              <br />
                              Xin chào, {{bill.tenNguoiNhan == null || bill.tenNguoiNhan == "" ? 'khách hàng' :
                              bill.tenNguoiNhan}}.
                              <br> Cảm ơn bạn đã ủng hộ shop.
                            </td>
                          </tr>
                        </tbody>
                      </table>
                      <table width="220" border="0" cellpadding="0" cellspacing="0" align="right" class="col">
                        <tbody>

                          <tr style=" transform: translateY(19px);">
                            <td
                              style="font-size: 12px; color: #5b5b5b; font-family: 'Open Sans', sans-serif; line-height: 18px; vertical-align: top; text-align: right;">
                              <div height="40" style="color: #5D87FF; font-weight: 700;"></div>
                              <br />
                              <small>Mã hóa đơn:</small> {{bill.ma}}<br />
                              <small>{{bill.ngayTao | date : 'HH:mm dd/MM/yyyy'}}</small>
                            </td>
                          </tr>
                        </tbody>
                      </table>
                    </td>
                  </tr>
                </tbody>
              </table>
            </td>
          </tr>
        </table>
      </td>
    </tr>
  </table>
  <!-- /Header -->
  <!-- Order Details -->
  <table width="100%" border="0" cellpadding="0" cellspacing="0" align="center" class="fullTable" bgcolor="#e1e1e1">
    <tbody>
      <tr>
        <td>
          <table width="600" border="0" cellpadding="0" cellspacing="0" align="center" class="fullTable"
            bgcolor="#ffffff">
            <tbody>
              <tr>
              <tr class="visibleMobile">
                <td height="40"></td>
              </tr>
              <tr>
                <td>
                  <table width="480" border="0" cellpadding="0" cellspacing="0" align="center" class="fullPadding">
                    <tbody>
                      <tr>
                        <th
                          style="font-size: 12px; font-family: 'Open Sans', sans-serif; color: #5b5b5b; font-weight: normal; line-height: 1; vertical-align: top; padding: 0 10px 7px 0;"
                          width="52%" align="left">
                          Sản phẩm
                        </th>
                        <th
                          style="font-size: 12px; font-family: 'Open Sans', sans-serif; color: #5b5b5b; font-weight: normal; line-height: 1; vertical-align: top; padding: 0 0 7px;"
                          align="center">
                          Đơn giá
                        </th>
                        <th
                          style="font-size: 12px; font-family: 'Open Sans', sans-serif; color: #5b5b5b; font-weight: normal; line-height: 1; vertical-align: top; padding: 0 0 7px;"
                          align="center">
                          Số lượng
                        </th>
                        <th
                          style="font-size: 12px; font-family: 'Open Sans', sans-serif; color: #1e2b33; font-weight: normal; line-height: 1; vertical-align: top; padding: 0 0 7px;"
                          align="right">
                          Thành tiền
                        </th>
                      </tr>
                      <tr>
                        <td height="1" style="background: #bebebe;" colspan="4"></td>
                      </tr>
                      <tr>
                        <td height="10" colspan="4"></td>
                      </tr>
                      <tr ng-repeat="billDetail in billDetails.content">
                        <td
                          style="font-size: 12px; font-family: 'Open Sans', sans-serif; color: #ff0000;  line-height: 18px;  vertical-align: top; padding:10px 0;"
                          class="article">
                          {{billDetail.idSanPhamChiTiet.idSanPham.ten}}[{{billDetail.idSanPhamChiTiet.idMauSac.ten}}
                          - {{billDetail.idSanPhamChiTiet.idKichCo.kichCo}}]
                        </td>
                        <td
                          style="font-size: 12px; font-family: 'Open Sans', sans-serif; color: #646a6e;  line-height: 18px;  vertical-align: top; padding:10px 0;">
                          <small> {{formatToVND(billDetail.donGiaSauKhiGiam == null ?
                            billDetail.donGia : billDetail.donGiaSauKhiGiam)}}</small>
                        </td>
                        <td
                          style="font-size: 12px; font-family: 'Open Sans', sans-serif; color: #646a6e;  line-height: 18px;  vertical-align: top; padding:10px 0;"
                          align="center">{{billDetail.soLuong}}</td>
                        <td
                          style="font-size: 12px; font-family: 'Open Sans', sans-serif; color: #1e2b33;  line-height: 18px;  vertical-align: top; padding:10px 0;"
                          align="right"> {{formatToVND(billDetail.donGiaSauKhiGiam == null ?
                          (billDetail.donGia * billDetail.soLuong) : (billDetail.donGiaSauKhiGiam *
                          billDetail.soLuong))}}</td>
                      </tr>

                      <tr>
                        <td height="1" colspan="4" style="border-bottom:1px solid #e4e4e4"></td>
                      </tr>
                    </tbody>
                  </table>
                </td>
              </tr>
              <tr>
                <td height="20"></td>
              </tr>
            </tbody>
          </table>
        </td>
      </tr>
    </tbody>
  </table>
  <!-- /Order Details -->
  <!-- Total -->
  <table width="100%" border="0" cellpadding="0" cellspacing="0" align="center" class="fullTable" bgcolor="#e1e1e1">
    <tbody>
      <tr>
        <td>
          <table width="600" border="0" cellpadding="0" cellspacing="0" align="center" class="fullTable"
            bgcolor="#ffffff">
            <tbody>
              <tr>
                <td>

                  <!-- Table Total -->
                  <table width="480" border="0" cellpadding="0" cellspacing="0" align="center" class="fullPadding">
                    <tbody>
                      <tr>
                        <td
                          style="font-size: 12px; font-family: 'Open Sans', sans-serif; color: #646a6e; line-height: 22px; vertical-align: top; text-align:right; ">
                          Tạm tính
                        </td>
                        <td
                          style="font-size: 12px; font-family: 'Open Sans', sans-serif; color: #646a6e; line-height: 22px; vertical-align: top; text-align:right; white-space:nowrap;"
                          width="80">
                          {{formatToVND(bill.tongTien)}}
                        </td>
                      </tr>
                      <tr>
                        <td
                          style="font-size: 12px; font-family: 'Open Sans', sans-serif; color: #646a6e; line-height: 22px; vertical-align: top; text-align:right; ">
                          <small>Phiếu giảm giá</small>
                        </td>
                        <td
                          style="font-size: 12px; font-family: 'Open Sans', sans-serif; color: #646a6e; line-height: 22px; vertical-align: top; text-align:right; ">
                          <small>{{formatToVND(bill.idVoucher === null ? 0 : bill.soPhanTramKhuyenMai *
                            bill.tongTien/100)}}</small>
                        </td>
                      </tr>
                      <tr>
                        <td
                          style="font-size: 12px; font-family: 'Open Sans', sans-serif; color: #646a6e; line-height: 22px; vertical-align: top; text-align:right; ">
                          Phí vận chuyển
                        </td>
                        <td
                          style="font-size: 12px; font-family: 'Open Sans', sans-serif; color: #646a6e; line-height: 22px; vertical-align: top; text-align:right; ">
                          {{formatToVND(bill.phiVanChuyen === null || bill.phiVanChuyen === 0 ? 0 :
                          bill.phiVanChuyen)}}
                        </td>
                      </tr>
                      <tr>
                        <td
                          style="font-size: 12px; font-family: 'Open Sans', sans-serif; color: #000; line-height: 22px; vertical-align: top; text-align:right; ">
                          <strong>Tổng tiền</strong>
                        </td>
                        <td
                          style="font-size: 12px; font-family: 'Open Sans', sans-serif; color: #000; line-height: 22px; vertical-align: top; text-align:right; ">
                          <strong>{{formatToVND(bill.tongTienSauGiam)}}</strong>
                        </td>
                      </tr>

                    </tbody>
                  </table>
                  <!-- /Table Total -->

                </td>
              </tr>
            </tbody>
          </table>
        </td>
      </tr>
    </tbody>
  </table>
  <!-- /Total -->

</div>

<!-- Modal state 1 -->
<div class="modal fade" id="confirmModal" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title text-center" id="exampleModalLabel">Ghi chú đơn hàng </h5>
        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Đóng"></button>
      </div>
      <div class="modal-body">
        <label for="exampleInputEmail1" class="form-label">Ghi chú: </label>
        <textarea placeholder="Nhập mô tả...." type="text" class="form-control" ng-model="noteState1"
          id="exampleInputEmail1" rows="4" aria-describedby="emailHelp"></textarea>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-danger" data-bs-dismiss="modal">
          <i class="ti ti-x" style="
                  display: inline-block;
                  font-size: 18px;
                  transform: translateY(2px);
              "></i>
          Đóng</button>
        <button type="button" class="btn btn-primary" ng-click="confirmBill()">
          Xác nhận
        </button>
      </div>
    </div>
  </div>
</div>

<!-- Modal state 2 -->
<div class="modal fade" id="shipModal" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title text-center" id="exampleModalLabel">Ghi chú đơn hàng </h5>
        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Đóng"></button>
      </div>
      <div class="modal-body">
        <label for="exampleInputEmail1" class="form-label">Ghi chú: </label>
        <textarea placeholder="Nhập ghi chú...." type="text" class="form-control" ng-model="noteState2"
          id="exampleInputEmail1" rows="4" aria-describedby="emailHelp"></textarea>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-danger" data-bs-dismiss="modal">
          <i class="ti ti-x" style="
                  display: inline-block;
                  font-size: 18px;
                  transform: translateY(2px);
              "></i>
          Đóng</button>
        <button type="button" class="btn btn-primary" ng-click="shippBill()">
          Xác nhận
        </button>
      </div>
    </div>
  </div>
</div>

<!-- Modal state 3 -->
<div class="modal fade" id="successModal" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title text-center" id="exampleModalLabel">Ghi chú đơn hàng </h5>
        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Đóng"></button>
      </div>
      <div class="modal-body">
        <label for="exampleInputEmail1" class="form-label">Ghi chú: </label>
        <textarea placeholder="Nhập ghi chú...." type="text" class="form-control" ng-model="noteState3"
          id="exampleInputEmail1" rows="4" aria-describedby="emailHelp"></textarea>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-danger" data-bs-dismiss="modal">
          <i class="ti ti-x" style="
                  display: inline-block;
                  font-size: 18px;
                  transform: translateY(2px);
              "></i>
          Đóng</button>
        <button type="button" class="btn btn-primary" ng-click="successBill()">
          Xác nhận
        </button>
      </div>
    </div>
  </div>
</div>

<!-- Modal state 3 -->
<div class="modal fade" id="refundModal" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title text-center" id="exampleModalLabel">Trả toàn bộ hàng </h5>
        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Đóng"></button>
      </div>
      <div class="modal-body">
        <label for="exampleInputEmail1" class="form-label">Lý do: </label>
        <textarea placeholder="Nhập mô tả...." type="text" class="form-control" ng-model="noteState4"
          id="exampleInputEmail1" rows="4" aria-describedby="emailHelp"></textarea>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-danger" data-bs-dismiss="modal">
          <i class="ti ti-x" style="
                  display: inline-block;
                  font-size: 18px;
                  transform: translateY(2px);
              "></i>
          Đóng</button>
        <button type="button" class="btn btn-primary" ng-click="refundBill()">
          Xác nhận hoàn tiền
        </button>
      </div>
    </div>
  </div>
</div>

<!-- Modal state 3 -->
<div class="modal fade" id="billDetailSingleRefund" tabindex="-1" aria-labelledby="exampleModalLabel"
  aria-hidden="true">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title text-center" id="exampleModalLabel">Trả hàng một phần </h5>
        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Đóng"></button>
      </div>
      <div class="modal-body">
        <div>
          <label for="exampleInputEmail1" class="form-label">Số lượng: </label>
          <input placeholder="Nhập số lượng...." type="number"
           onkeydown="return event.keyCode !== 69 && event.keyCode !== 187 && event.keyCode !== 189"
           class="form-control" ng-model="quantityRefund"
            id="exampleInputEmail1" aria-describedby="emailHelp"></input>
        </div>

        <div>
          <label for="exampleInputEmail1" class="form-label">Lý do: </label>
          <textarea placeholder="Nhập mô tả...." type="text" class="form-control" ng-model="noteState4"
            id="exampleInputEmail1" rows="4" aria-describedby="emailHelp"></textarea>
        </div>

      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-danger" data-bs-dismiss="modal">
          <i class="ti ti-x" style="
                  display: inline-block;
                  font-size: 18px;
                  transform: translateY(2px);
              "></i>
          Đóng</button>
        <button type="button" class="btn btn-primary" ng-click="refundSingleBill()">
          Xác nhận hoàn tiền
        </button>
      </div>
    </div>
  </div>
</div>

<!-- Modal state 3 -->
<div class="modal fade" id="cancelModal" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title text-center" id="exampleModalLabel">Lý do hủy đơn hàng </h5>
        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Đóng"></button>
      </div>
      <div class="modal-body">
        <label for="exampleInputEmail1" class="form-label">Lý do: </label>
        <textarea placeholder="Nhập lí do...." type="text" class="form-control" ng-model="noteState5"
          id="exampleInputEmail1" rows="4" aria-describedby="emailHelp"></textarea>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-danger" data-bs-dismiss="modal">
          <i class="ti ti-x" style="
                  display: inline-block;
                  font-size: 18px;
                  transform: translateY(2px);
              "></i>
          Đóng</button>
        <button type="button" class="btn btn-primary" ng-click="cancelBill()">
          Xác nhận hủy
        </button>
      </div>
    </div>
  </div>
</div>

<!-- customer modal -->
<div class="modal fade" id="customerEdit" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title text-center" id="exampleModalLabel">Sửa khách hàng</h5>
        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Đóng"></button>
      </div>
      <div class="modal-body">
        <div>
          <div>
            <label for="exampleInputEmail1" class="form-label">Tên khách hàng <sup
                style="color: #fa0000a8;">*</sup></label>
            <input placeholder="Nhập tên khách hàng...." style="height: 40px;" type="text" class="form-control"
              ng-model="oldBill.tenNguoiNhan" id="exampleInputEmail1" aria-describedby="emailHelp">
          </div>

          <div style=" margin-top: 20px;display: flex;justify-content: space-between;">
            <div style="width: 48%;">
              <label for="exampleInputEmail1" class="form-label">Số điện thoại <sup style="color: #fa0000a8;">*</sup>
              </label>
              <input placeholder="Nhập số điện thoại..." style="height: 40px;" type="text m" class="form-control"
                id="exampleInputEmail1" ng-model="oldBill.sdtNguoiNhan" aria-describedby="emailHelp">
            </div>

            <div style="width: 48%;">
              <label for="exampleInputEmail1" class="form-label">Email <sup style="color: #fa0000a8;">*</sup>
              </label>
              <input placeholder="Nhập email..." style="height: 40px;" type="text m" class="form-control"
                id="exampleInputEmail1" ng-model="oldBill.email" aria-describedby="emailHelp">
            </div>

          </div>

          <div style="display: flex;justify-content: space-between;align-items: center; margin-top: 20px;">
            <div style="width: 48%;">
              <label for="exampleInputEmail1" class="form-label">Tỉnh/Thành phố <sup
                  style="color: #fa0000a8;">*</sup></label>
              <div class="select-wrap">
                <select class="form-select " id="city" name="city"
                  onchange="angular.element(this).scope().getAllDistrict()" placeholder="Chọn trạng thái">
                </select>
              </div>
            </div>

            <div style="width: 48%;">
              <label for="exampleInputEmail1" class="form-label">Quận/huyện <sup style="color: #fa0000a8;">*</sup>
              </label>
              <div class="select-wrap">
                <select class="form-select" id="district" name="district"
                  onchange="angular.element(this).scope().getFullWardCode()" placeholder="Chọn trạng thái">
                  <option value="">--Chọn Quận/Huyện--</option>
                </select>
              </div>
            </div>

          </div>

          <div style="display: flex;justify-content: space-between;align-items: center; margin-top: 20px;">
            <div style="width: 48%;">
              <label for="exampleInputEmail1" class="form-label">Xã/phường <sup
                  style="color: #fa0000a8;">*</sup></label>
              <div class="select-wrap">
                <select class="form-select" id="ward" name="select" placeholder="Chọn trạng thái">
                  >
                  <option value="">--Chọn Xã/Phường--</option>
                </select>
              </div>
            </div>

            <div style="width: 48%;">
              <label for="exampleInputEmail1" class="form-label">Số nhà/Ngõ/Đường <sup style="color: #fa0000a8;">*</sup>
              </label>
              <input placeholder="Nhập địa chỉ..." style="height: 40px;" type="text" class="form-control"
                id="exampleInputEmail1" ng-model="oldBill.diaChi" aria-describedby="emailHelp">
            </div>

          </div>



        </div>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-danger" data-bs-dismiss="modal">
          <i class="ti ti-x" style="
                                         display: inline-block;
                                         font-size: 18px;
                                         transform: translateY(2px);
                                     "></i>
          Đóng</button>
        <button type="button" class="btn btn-primary" ng-click="updateCustomer()" style="margin-right: 15px;">
          <i class="ti ti-edit" style="
                             display: inline-block;
                             font-size: 18px;
                             transform: translateY(2px);
                         "></i>
          Xác nhận
        </button>
      </div>
    </div>
  </div>
</div>

<!-- list product -->
<div class="modal fade" id="productListModal" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
  <div class="modal-dialog">
    <div class="modal-content" style="width: 900px;
             top: -4px;
             left: -147px;">
      <div class="modal-header">
        <h5 class="modal-title text-center" id="exampleModalLabel">Chọn sản phẩm</h5>
        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Đóng"></button>
      </div>
      <div class="modal-body">
        <div class="table-responsive">
          <table class="table">
            <thead class="text-dark fs-4" style="background-color: rgb(218 212 212 / 24%)">
              <tr>
                <th style="width: 7%;">
                  <h6 class="fw-semibold mb-0" style="border-right: 1px solid #b1acac;">#</h6>
                </th>
                <th class="border-bottom-0" style="width: 45%;">
                  <h6 class="fw-semibold mb-0" style="border-right: 1px solid #b1acac;">Sản phẩm</h6>
                </th>
                <th class="border-bottom-0">
                  <h6 class="fw-semibold mb-0" style="border-right: 1px solid #b1acac;">Số lượng</h6>
                </th>
                <th class="border-bottom-0">
                  <h6 class="fw-semibold mb-0" style="border-right: 1px solid #b1acac;">Giá bán</h6>
                </th>
                <th class="border-bottom-0">
                  <h6 class="fw-semibold mb-0">Thao tác</h6>
                </th>
              </tr>
            </thead>
            <tbody>
              <tr ng-repeat="product in listProducts.content">
                <td class="border-bottom-0">
                  <h6 class="fw-semibold mb-0"> {{$index + 1}}</h6>
                </td>
                <td class="border-bottom-0">
                  <img ng-repeat="image in getAllImagesByIDProductDetail(product.id)" src="{{image.duongDan}}"
                    style="width: 100px;height: 100px;">
                  <div style="justify-content: space-between;display: flex;">
                    <div id="image-{{product.id}}" style="width: 40%;">
                    </div>

                    <div style="width: 58%;">
                      <span style="
                          display: inline-block;
                          color: #333;
                          font-size: 14px;
                          font-weight: 600;
                          transform: translateY(-7px);
                          ">{{product.idSanPham.ten}}[{{product.idMauSac.ten}} - {{product.idKichCo.kichCo}}]</span>

                      <div style="display: flex;font-size: 11px;transform: translateY(-4px);">
                        <span>Màu: {{product.idMauSac.ten}}</span>
                        <span style="margin-left: 10px;">Kích cỡ: {{product.idKichCo.kichCo}}</span>
                      </div>

                      <div style="display: flex;font-size: 11px;transform: translateY(-4px);">
                        <span>Thương hiệu: {{product.idSanPham.idThuongHieu.ten}}</span>
                      </div>

                      <div class="d-flex align-items-center gap-2"
                        ng-if="product.trangThai == 1 && product.soLuongTon == 0">
                        <span class="badge bg-danger rounded-3 fw-semibold" style="    
                                  padding: 10px;
                                  font-size: 8px;">Hết hàng</span>
                      </div>

                      <div class="d-flex align-items-center gap-2"
                        ng-if="product.trangThai == 1 && product.soLuongTon > 0 ">
                        <span class=" badge bg-primary rounded-3 fw-semibold" style="    
                                padding: 10px;
                                font-size: 8px;">Đang kinh doanh</span>
                      </div>

                      <div class="d-flex align-items-center gap-2"
                        ng-if="product.trangThai == 0 && product.soLuongTon > 0 ">
                        <span class=" badge bg-primary rounded-3 fw-semibold" style="    
                                  padding: 10px;
                                  font-size: 8px;">Đang kinh doanh</span>
                      </div>

                    </div>
                  </div>
                </td>
                <td class="border-bottom-0">
                  {{product.soLuongTon}}
                </td>
                <td class="border-bottom-0">
                  <span style="
                      display: inline-block;
                      color: red;
                      font-size: 12px;
                      font-weight: 800;
                      ">{{formatToVND(product.idDotGiamGia == null ? product.donGia : (100 -
                    product.idDotGiamGia.phanTramGiam) * product.donGia / 100)}}</span>
                  <span style="
                      display: inline-block;
                      color: rgb(150, 150, 150);
                      font-size: 10px;
                      font-weight: 800;
                      text-decoration: line-through;
                      " ng-if="product.idDotGiamGia != null">{{formatToVND(product.donGia)}}</span>

                </td>
                <td class="border-bottom-0">
                  <button class="btn btn-primary" ng-if="product.soLuongTon > 0"
                    ng-click="addProductToBill(product)">Chọn</button>
                  <button class="btn btn-danger" disabled ng-if="product.soLuongTon == 0">
                    Hết hàng
                  </button>
                </td>
              </tr>

            </tbody>
          </table>
        </div>

        <span ng-show="numPages!=0">
          <uib-pagination items-per-page="itemsPerPage" total-items="totalItems" ng-model="currentPage"
            class="pagination-sm" previous-text="‹" next-text="›" first-text="«" last-text="»" style="
                width: 16%;
                margin-left: auto;
                margin-right: auto;
                " max-size="3" ng-change="pageChanged()"></uib-pagination>
        </span>
      </div>

    </div>
  </div>
</div>

<!--payment -->
<div class="modal fade" id="paymentModal" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title text-center" id="exampleModalLabel">Xác nhận thanh toán </h5>
        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Đóng"></button>
      </div>
      <div class="modal-body">

        <div style="margin-bottom: 10px;">
          <!-- xác nhận phươnt thức thanh toán  -->
          <div style="width: 100%;display: flex;justify-content: space-between;margin-top: 10px;">
            <button style="width: 49%;font-size: 14px;" class="btn btn-warning button-payment-method"
              ng-click="choosePaymentMethod(0)" id="payment-product-detail-0">
              Tiền mặt
            </button>

            <button style="width: 49%;font-size: 14px;" class="btn btn-outline-warning button-payment-method"
              ng-click="choosePaymentMethod(1)" id="payment-product-detail-1">
              Chuyển khoản
            </button>

          </div>
        </div>

        <div style="margin-bottom: 10px;display: flex;">
          <label for="exampleInputPaymentMethod" class="form-label" style="width: 260px;">Số tiền thanh toán: </label>
          <input type="number" onkeydown="return event.keyCode !== 69 && event.keyCode !== 187 && event.keyCode !== 189"
            name="" id="exampleInputPaymentMethod" class="form-control" ng-model="moneyPayment">
        </div>

        <div style="margin-bottom: 10px;">
          <label for="exampleInputPaymentMethod" class="form-label" style="width: 165px;">Số tiền cần thanh toán:
          </label>
          <span style="display: inline-block;color: #eb4528; font-weight: 600;">{{formatToVND(bill.tongTienSauGiam -
            moneyChange)}}</span>
        </div>

        <div style="margin-bottom: 10px;" ng-if="bill.tongTienSauGiam - moneyChange <= moneyPayment">
          <label for="exampleInputPaymentMethod" class="form-label" style="width: 165px;">Số tiền thừa: </label>
          <span style="display: inline-block;color: #eb4528; font-weight: 600;">{{formatToVND(moneyPayment -
            (bill.tongTienSauGiam - moneyChange))}}</span>
        </div>

        <div style="margin-bottom: 10px;" ng-if="bill.tongTienSauGiam - moneyChange > moneyPayment">
          <label for="exampleInputPaymentMethod" class="form-label" style="width: 165px;">Số tiền còn thiếu: </label>
          <span style="display: inline-block;color: #eb4528; font-weight: 600;">{{formatToVND(moneyPayment -
            (bill.tongTienSauGiam - moneyChange))}}</span>
        </div>

        <div>
          <label for="exampleInputEmail1" class="form-label">Ghi chú: </label>
          <textarea placeholder="Nhập ghi chú...." type="text" class="form-control" ng-model="noteState7"
            id="exampleInputEmail1" rows="4" aria-describedby="emailHelp"></textarea>
        </div>

      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-danger" data-bs-dismiss="modal">
          <i class="ti ti-x" style="
                  display: inline-block;
                  font-size: 18px;
                  transform: translateY(2px);
              "></i>
          Đóng</button>
        <button type="button" class="btn btn-primary" ng-click="confirmPayment()">
          Xác nhận thanh toán
        </button>
      </div>
    </div>
  </div>
</div>

<!--payment -->
<div class="modal fade" id="paymentRefundModal" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title text-center" id="exampleModalLabel">Xác nhận hoàn tiền </h5>
        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Đóng"></button>
      </div>
      <div class="modal-body">

        <div style="margin-bottom: 10px;">
          <!-- xác nhận phươnt thức thanh toán  -->
          <div style="width: 100%;display: flex;justify-content: space-between;margin-top: 10px;">
            <button style="width: 49%;font-size: 14px;" class="btn btn-warning button-payment-method"
              ng-click="choosePaymentMethod(0)" id="payment-product-detail-0">
              Tiền mặt
            </button>

            <button style="width: 49%;font-size: 14px;" class="btn btn-outline-warning button-payment-method"
              ng-click="choosePaymentMethod(1)" id="payment-product-detail-1">
              Chuyển khoản
            </button>

          </div>
        </div>

        <div style="margin-bottom: 10px;display: flex;">
          <label for="exampleInputPaymentMethod" class="form-label" style="width: 260px;">Số tiền thanh toán: </label>
          <input type="number" onkeydown="return event.keyCode !== 69 && event.keyCode !== 187 && event.keyCode !== 189"
            name="" id="exampleInputPaymentMethod" class="form-control" ng-model="moneyRefund">
        </div>

        <div style="margin-bottom: 10px;">
          <label for="exampleInputPaymentMethod" class="form-label" style="width: 165px;">Số tiền cần hoàn:
          </label>
          <span style="display: inline-block;color: #eb4528; font-weight: 600;">{{formatToVND(moneyRefund)}}</span>
        </div>

        <div>
          <label for="exampleInputEmail1" class="form-label">Ghi chú: </label>
          <textarea placeholder="Nhập ghi chú...." type="text" class="form-control" ng-model="noteState8"
            id="exampleInputEmail1" rows="4" aria-describedby="emailHelp"></textarea>
        </div>

      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-danger" data-bs-dismiss="modal">
          <i class="ti ti-x" style="
                  display: inline-block;
                  font-size: 18px;
                  transform: translateY(2px);
              "></i>
          Đóng</button>
        <button type="button" class="btn btn-warning" ng-click="refundPayment()">
          Xác nhận hoàn tiền
        </button>
      </div>
    </div>
  </div>
</div>

<!-- history -->
<div class="modal fade" id="historyModal" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
  <div class="modal-dialog">
    <div class="modal-content" style="width: 900px;
                                      top: -4px;
                                      left: -147px;">
      <div class="modal-header">
        <h5 class="modal-title text-center" id="exampleModalLabel">Lịch sử đơn hàng</h5>
        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Đóng"></button>
      </div>
      <div class="modal-body">
        <div class="table-responsive">
          <table class="table">
            <thead class="text-dark fs-4" style="background-color: rgb(218 212 212 / 24%)">
              <tr>
                <th style="width: 7%;">
                  <h6 class="fw-semibold mb-0" style="border-right: 1px solid #b1acac;">#</h6>
                </th>
                <th class="border-bottom-0">
                  <h6 class="fw-semibold mb-0" style="border-right: 1px solid #b1acac;">Trạng thái</h6>
                </th>
                <th class="border-bottom-0">
                  <h6 class="fw-semibold mb-0" style="border-right: 1px solid #b1acac;">Ghi chú</h6>
                </th>
                <th class="border-bottom-0">
                  <h6 class="fw-semibold mb-0" style="border-right: 1px solid #b1acac;">Ngày </h6>
                </th>
              </tr>
            </thead>
            <tbody>
              <tr ng-repeat="e in history">
                <td class="border-bottom-0">
                  <h6 class="fw-semibold mb-0"> {{$index + 1}}</h6>
                </td>
                <td class="border-bottom-0">
                  <div class="d-flex align-items-center gap-2" ng-if="e.trangThai === 1">
                    <span class="badge bg-primary rounded-3 fw-semibold" style="    
                                padding: 11px;
                                font-size: 11px;">Xác nhận đơn hàng</span>
                  </div>
                  <div class="d-flex align-items-center gap-2" ng-if="e.trangThai === 2">
                    <span class="badge bg-info rounded-3 fw-semibold" style="    
                                padding: 11px;
                                font-size: 11px;">Chờ giao</span>
                  </div>
                  <div class="d-flex align-items-center gap-2" ng-if="e.trangThai === 3">
                    <span class="badge bg-warning rounded-3 fw-semibold" style="    
                                padding: 11px;
                                font-size: 11px;">Đang giao</span>
                  </div>
                  <div class="d-flex align-items-center gap-2" ng-if="e.trangThai === 4">
                    <span class="badge bg-success rounded-3 fw-semibold" style="    
                                padding: 11px;
                                font-size: 11px;">Thành công</span>
                  </div>
                  <div class="d-flex align-items-center gap-2" ng-if="e.trangThai === 5">
                    <span class="badge bg-danger rounded-3 fw-semibold" style="    
                                padding: 11px;
                                font-size: 11px;">Bị hủy</span>
                  </div>
                  <div class="d-flex align-items-center gap-2" ng-if="e.trangThai === 6">
                    <span class="badge bg-warning rounded-3 fw-semibold" style="    
                                padding: 11px;
                                font-size: 11px;">Trả hàng</span>
                  </div>
                  <div class="d-flex align-items-center gap-2" ng-if="e.trangThai === 7">
                    <span class="badge bg-success rounded-3 fw-semibold" style="    
                                padding: 11px;
                                font-size: 11px;">Đã thanh toán</span>
                  </div>

                  <div class="d-flex align-items-center gap-2" ng-if="e.trangThai === 8">
                    <span class="badge bg-info rounded-3 fw-semibold" style="    
                                padding: 11px;
                                font-size: 11px;">Đã hoàn tiền</span>
                  </div>

                </td>
                <td class="border-bottom-0">
                  <span class="fw-normal">{{e.ghiChu == null ? 'Không có ghi chú' : e.ghiChu}}</span>
                </td>
                <td class="border-bottom-0">
                  <span class="fw-normal">{{e.ngayTao | date : ' HH:mm dd/MM/yyyy'}}</span>
                </td>
              </tr>

            </tbody>
          </table>
        </div>

        <span ng-show="numPages!=0">
          <uib-pagination items-per-page="itemsPerPageCustomer" total-items="totalItemCustomers"
            ng-model="currentPageCustomer" class="pagination-sm" previous-text="‹" next-text="›" first-text="«"
            last-text="»" style="
            width: 16%;
            margin-left: auto;
            margin-right: auto;
            " max-size="3" ng-change="pageCustomerChanged()"></uib-pagination>
        </span>

      </div>
    </div>
  </div>
</div>